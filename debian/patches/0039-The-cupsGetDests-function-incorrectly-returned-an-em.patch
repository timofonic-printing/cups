From 4c18e2ea5d62f556b02f6c36f79056d47acfeffc Mon Sep 17 00:00:00 2001
From: Michael R Sweet <michaelrsweet@gmail.com>
Date: Fri, 7 Jul 2017 14:23:21 -0400
Subject: The `cupsGetDests` function incorrectly returned an empty list of
 printers if there was no default printer (Issue #5046)

Closes: #867818
---
 cups/dest.c | 9 ---------
 1 file changed, 9 deletions(-)

diff --git a/cups/dest.c b/cups/dest.c
index fc57ed342..614b4aecb 100644
--- a/cups/dest.c
+++ b/cups/dest.c
@@ -2059,15 +2059,6 @@ cupsGetDests2(http_t      *http,	/* I - Connection to server or @code CUPS_HTTP_
 
   cupsEnumDests(0, 1000, NULL, 0, 0, (cups_dest_cb_t)cups_get_cb, &data);
 
-  if (cupsLastError() >= IPP_STATUS_REDIRECTION_OTHER_SITE)
-  {
-    cupsFreeDests(data.num_dests, data.dests);
-
-    *dests = (cups_dest_t *)0;
-
-    return (0);
-  }
-
  /*
   * Make a copy of the "real" queues for a later sanity check...
   */
