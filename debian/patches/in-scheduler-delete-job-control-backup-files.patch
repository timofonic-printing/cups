From f3ecf4844e6dc3e407f79ee1b52d757112188b3c Mon Sep 17 00:00:00 2001
From: mike <mike@7a7537e8-13f0-0310-91df-b6672ffda945>
Date: Wed, 12 Dec 2012 20:19:43 +0000
Subject: [PATCH] The scheduler did not delete job control backup files (STR
 #4244)

git-svn-id: http://svn.cups.org/public/cups/trunk@10753 7a7537e8-13f0-0310-91df-b6672ffda945
---
 scheduler/job.c |    9 +++++++++
 2 files changed, 10 insertions(+)

--- a/scheduler/job.c
+++ b/scheduler/job.c
@@ -2195,7 +2195,16 @@
   }
 
   if (!cupsdCloseCreatedConfFile(fp, filename))
+  {
+   /*
+    * Remove backup file and mark this job as clean...
+    */
+
+    strlcat(filename, ".O", sizeof(filename));
+    unlink(filename);
+
     job->dirty = 0;
+  }
 }
 
 
